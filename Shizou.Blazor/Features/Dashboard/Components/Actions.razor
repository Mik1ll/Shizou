@using Shizou.Server.AniDbApi.Requests.Udp
@using Shizou.Data.Utilities
@inject UdpRequestFactory UdpRequestFactory

<h3>Actions</h3>
<div class="d-flex flex-wrap gap-1">
    <button type="button" class="btn btn-primary" @onclick="@DispatchNoop">Add noops</button>
    <button type="button" class="btn btn-primary" @onclick="@RunImport">Run Import</button>
    <button type="button" class="btn btn-primary" @onclick="@RemoveMissingFiles">Remove Missing Files</button>
    <button type="button" class="btn btn-primary" @onclick="@(async () => await UdpRequestFactory.PingRequest().Process())">Ping AniDb</button>
    <button type="button" class="btn btn-primary" @onclick="@DispatchMyListSync">Sync MyList</button>
    <button type="button" class="btn btn-primary" @onclick="@ScheduleNoop">Schedule Noop</button>
    <button type="button" class="btn btn-primary" @onclick="@GetMissingPosters">Get Missing Posters</button>
    @if (NetworkUtility.IsLoopBackAddress(RemoteIp))
    {
        <a class="btn btn-primary" href="@(GetMalAuthenticationUrl())" target="_blank">Authenticate MyAnimeList</a>
    }
    else
    {
        <a class="btn btn-primary disabled ">Authenticate MyAnimeList (requires localhost access)</a>
    }
</div>