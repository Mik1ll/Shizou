@using Shizou.Server.AniDbApi.Requests.Udp
@using Shizou.Server.Controllers
@inject UdpRequestFactory UdpRequestFactory

<h3>Actions</h3>
<section class="actions">
    <button type="button" class="btn btn-primary" @onclick="@DispatchNoop">Add noops</button>
    <button type="button" class="btn btn-primary" @onclick="@RunImport">Run Import</button>
    <button type="button" class="btn btn-primary" @onclick="@RemoveMissingFiles">Remove Missing Files</button>
    <button type="button" class="btn btn-primary" @onclick="@(async () => await UdpRequestFactory.PingRequest().Process())">Ping AniDb</button>
    <button type="button" class="btn btn-primary" @onclick="@DispatchMyListSync">Sync MyList</button>
    <button type="button" class="btn btn-primary" @onclick="@ScheduleNoop">Schedule Noop</button>
    <button type="button" class="btn btn-primary" @onclick="@GetMissingPosters">Get Missing Posters</button>
    @if (AccountController.IsLoopBackAddress(RemoteIp))
    {
        <a class="btn btn-primary" href="@(MyAnimeListController.GetAuthenticationUrl(OptionsSnapshot.Value.MyAnimeList.ClientId, RemoteIp, Logger))" target="_blank">Authenticate MyAnimeList</a>
    }
</section>